---
title: Cost Metrics
description: Query and analyze costs, profits, and customer lifetime value
---

Once you've ingested events with cost data, Polar automatically calculates several key metrics that you can query through the Metrics API.

## Available Cost Metrics

- **`costs`**: Total costs for a given time period
- **`cumulative_costs`**: Cumulative costs over time

## Derived Metrics (Coming Soon)

By combining cost metrics with revenue metrics, we can calculate:

- **Profit**: `revenue - costs`
- **Customer LTV**: Track cumulative revenue and costs per customer over their lifetime
- **Profit Margin**: `(revenue - costs) / revenue`
- **Cost per User**: Average cost per active user
- **Average Revenue per User (ARPU)**: Average revenue per active user
- **Customer Acquisition Cost (CAC)**: Total marketing and sales costs divided by new customers acquired
- **Gross Margin**: `(revenue - costs) / revenue * 100`
- **Unit Economics**: Cost and revenue metrics broken down by product or service unit
- **Cost Efficiency Ratio**: Operating costs divided by revenue
- **Monthly Recurring Cost (MRC)**: Fixed costs that occur monthly
- **Return on Investment (ROI)**: `(revenue - costs) / costs * 100`

These metrics are coming soon.

## Querying Cost Metrics

Use the Metrics API to retrieve cost data:

```bash
GET /api/v1/metrics
  ?interval=month
  &start_date=2024-01-01
  &end_date=2024-12-31
  &metrics=revenue,costs
  &customer_id=cus_abc123
```

### Example Response

```json
{
  "periods": [
    {
      "timestamp": "2024-01-01T00:00:00Z",
      "revenue": 10000,
      "costs": 2500
    },
    {
      "timestamp": "2024-02-01T00:00:00Z",
      "revenue": 12000,
      "costs": 3200
    }
  ]
}
```

## Integration with Revenue Metrics

Cost Insights is most powerful when combined with Polar's built-in revenue tracking:

```json
{
  "periods": [
    {
      "timestamp": "2024-01-01T00:00:00Z",
      "revenue": 10000, // From orders/subscriptions
      "net_revenue": 9500, // After payment fees
      "costs": 2500, // From _cost events
      "profit": 7500, // revenue - costs
      "net_profit": 7000, // net_revenue - costs
      "profit_margin": 0.75 // profit / revenue
    }
  ]
}
```

## Filtering and Segmenting Data

Use event names and metadata to analyze costs by category:

```bash
# Get costs for specific event types
GET /api/v1/events?name=llm.inference&metadata._cost=*

# Filter by customer
GET /api/v1/metrics?customer_id=cus_abc123&metrics=costs
```

### Analyzing Cost by Category

You can use event names to segment costs:

- Track AI costs separately from infrastructure costs
- Compare costs across different features or services
- Identify high-cost customers or usage patterns
- Monitor cost trends over time

### Per-Customer Analysis

Query metrics for individual customers to understand:

- Customer profitability (revenue vs. costs)
- Customer lifetime value
- Cost efficiency by customer segment
- High-usage or high-cost customers
